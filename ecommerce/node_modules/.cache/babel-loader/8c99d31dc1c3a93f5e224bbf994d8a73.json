{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Likith Reddy\\\\Desktop\\\\e-cart\\\\e-cart\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Likith Reddy\\\\Desktop\\\\e-cart\\\\e-cart\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Likith Reddy\\\\Desktop\\\\e-cart\\\\e-cart\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import AddressForm from\"../AddressForm\";import PaymentForm from\"../PaymentForm\";import{Typography,Stepper,Paper,Step,StepLabel,CircularProgress,Divider,Button}from\"@material-ui/core\";import Navbar1 from'../../Navbar/Navbarlocal';import{Link}from'react-router-dom';import useStyles from\"./style.js\";import{commerce}from\"../../../lib/commerce\";import StripeContainer from\"../StripeContainer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var steps=[\"shipping address\",\"payment details\"];function Checkout(_ref){var cart=_ref.cart,order=_ref.order,error=_ref.error,handleCaptureCheckout=_ref.handleCaptureCheckout;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),activeStep=_useState2[0],setactiveStep=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),checkOutToken=_useState4[0],setCheckOutToken=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),shippingData=_useState6[0],setShippingData=_useState6[1];var classes=useStyles();useEffect(function(){var generateToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return commerce.checkout.generateToken(cart.id,{type:\"cart\"});case 3:token=_context.sent;setCheckOutToken(token);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function generateToken(){return _ref2.apply(this,arguments);};}();generateToken();},[cart]);var Confirmation=function Confirmation(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"Thank you for your purchase!\"}),/*#__PURE__*/_jsx(Divider,{className:classes.divider})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{component:Link,variant:\"outlined\",type:\"button\",to:\"/product\",children:\"Back to home\"})]});};if(error){Confirmation=function Confirmation(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{component:Link,variant:\"outlined\",type:\"button\",to:\"/\",children:\"Back to home\"})]});};}function nextStep(){setactiveStep(function(prev){return prev+1;});}function backStep(){setactiveStep(function(prev){return prev-1;});}var next=function next(data){setShippingData(data);nextStep();};var Form=function Form(){return activeStep===0?/*#__PURE__*/_jsx(AddressForm,{checkOutToken:checkOutToken,next:next}):/*#__PURE__*/_jsx(StripeContainer,{shippingData:shippingData,checkOutToken:checkOutToken,backStep:backStep,handleCaptureCheckout:handleCaptureCheckout,nextStep:nextStep,order:order});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar1,{totalitems:cart.total_items}),/*#__PURE__*/_jsx(\"div\",{className:classes.toolbar}),/*#__PURE__*/_jsx(\"main\",{className:classes.layout,children:/*#__PURE__*/_jsxs(Paper,{className:classes.paper,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",children:\"Checkout\"}),/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,className:classes.stepper,children:steps.map(function(step){return/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:step})},step);})}),activeStep===steps.length?/*#__PURE__*/_jsx(Confirmation,{}):checkOutToken&&/*#__PURE__*/_jsx(Form,{})]})})]});}export default Checkout;","map":{"version":3,"sources":["C:/Users/Likith Reddy/Desktop/e-cart/e-cart/ecommerce/src/components/CheckoutForm/Checkout/Checkout.jsx"],"names":["React","useState","useEffect","AddressForm","PaymentForm","Typography","Stepper","Paper","Step","StepLabel","CircularProgress","Divider","Button","Navbar1","Link","useStyles","commerce","StripeContainer","steps","Checkout","cart","order","error","handleCaptureCheckout","activeStep","setactiveStep","checkOutToken","setCheckOutToken","shippingData","setShippingData","classes","generateToken","checkout","id","type","token","Confirmation","divider","nextStep","prev","backStep","next","data","Form","total_items","toolbar","layout","paper","stepper","map","step","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport AddressForm from \"../AddressForm\";\r\nimport PaymentForm from \"../PaymentForm\";\r\nimport {\r\n  Typography,\r\n  Stepper,\r\n  Paper,\r\n  Step,\r\n  StepLabel,\r\n  CircularProgress,\r\n  Divider,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport Navbar1 from '../../Navbar/Navbarlocal';\r\nimport {Link} from 'react-router-dom'\r\nimport useStyles from \"./style.js\";\r\nimport { commerce } from \"../../../lib/commerce\";\r\nimport StripeContainer from \"../StripeContainer\";\r\nconst steps = [\"shipping address\", \"payment details\"];\r\nfunction Checkout({ cart, order, error, handleCaptureCheckout }) {\r\n  const [activeStep, setactiveStep] = useState(0);\r\n  const [checkOutToken, setCheckOutToken] = useState(null);\r\n  const [shippingData, setShippingData] = useState({});\r\n  const classes = useStyles();\r\n  useEffect(() => {\r\n    const generateToken = async () => {\r\n      try {\r\n        const token = await commerce.checkout.generateToken(cart.id, {\r\n          type: \"cart\",\r\n        });\r\n\r\n        setCheckOutToken(token);\r\n      } catch (error) {}\r\n    };\r\n    generateToken();\r\n  }, [cart]);\r\n  let Confirmation = () => (\r\n    <>\r\n      <div>\r\n        <Typography variant=\"h5\">Thank you for your purchase!</Typography>\r\n        <Divider className={classes.divider} />\r\n      </div>\r\n      <br />\r\n      <Button component={Link} variant=\"outlined\" type=\"button\" to=\"/product\">Back to home</Button>\r\n    </>\r\n  )\r\n\r\n  if (error) {\r\n    Confirmation = () => (\r\n      <>\r\n        <Typography variant=\"h5\">Error: {error}</Typography>\r\n        <br />\r\n        <Button component={Link} variant=\"outlined\" type=\"button\" to=\"/\">Back to home</Button>\r\n      </>\r\n    );\r\n  }\r\n  function nextStep() {\r\n    setactiveStep((prev) => prev + 1);\r\n  }\r\n  function backStep() {\r\n    setactiveStep((prev) => prev - 1);\r\n  }\r\n  const next = (data) => {\r\n    setShippingData(data);\r\n    nextStep();\r\n  };\r\n  const Form = () =>\r\n    activeStep === 0 ? (\r\n      <AddressForm checkOutToken={checkOutToken} next={next} />\r\n    ) : (\r\n      <StripeContainer\r\n        shippingData={shippingData}\r\n        checkOutToken={checkOutToken}\r\n        backStep={backStep}\r\n        handleCaptureCheckout={handleCaptureCheckout}\r\n        nextStep={nextStep}\r\n        order={order}\r\n      />\r\n    );\r\n\r\n  return (\r\n    <>\r\n     <Navbar1 totalitems={cart.total_items} />\r\n      <div className={classes.toolbar} />\r\n      <main className={classes.layout}>\r\n        <Paper className={classes.paper}>\r\n          <Typography variant=\"h4\" align=\"center\">\r\n            Checkout\r\n          </Typography>\r\n          <Stepper activeStep={activeStep} className={classes.stepper}>\r\n            {steps.map((step) => (\r\n              <Step key={step}>\r\n                <StepLabel>{step}</StepLabel>\r\n              </Step>\r\n            ))}\r\n          </Stepper>\r\n          {activeStep === steps.length ? (\r\n            <Confirmation />\r\n          ) : (\r\n            checkOutToken && <Form />\r\n          )}\r\n        </Paper>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Checkout;\r\n"]},"metadata":{},"sourceType":"module"}